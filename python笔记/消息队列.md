## 消息队列rabbitmp

### 1. 安装

```shell
# 需要安装erlong
yum install -y Erlong rabbitmp-server
```

### 2. 启动

```shell
systemctl start rabbitmq-server
systemctl status rabbitmq-server
```

### 3. 配置、管理

#### 1. 创建管理员

```shell
# 1. 添加用户：henry 密码：123
rabbitmqctl add_user henry 123
# 2. 启动
systemctl start rabbitmq-server
# 3. 给henry设置管理员角色
rabbitmqctl set_user_tags henry administrator
# 4. 给予用户，对所有的队列可读可写
rabbitmqctl set_permissions -p '/' henry '.*' '.*' '.*'
# 5. 添加web管理页面
rabbitmq-plugins enable rabbitmq_management
# 6. 重启
systemctl restart rabbitmq-server
# 7. 访问
http://ip:port/
# 登录
```

#### 2. 单生产者-消费者

-   producer.py

```python

```

```shell
pip3 install pika
python3 producer.py
```

-   consumer.py

```python

```

```shell
python3 producer.py
```

#### 3. 单生产者-多消费者

-   开启多个消费者

#### 4. 确认机制

-   消息队列确认机制**保证消息被正确处理**
-   消息队列可以是中文，一般遵循开发文档规范
-   ack_producer.py

```shell

```

-   ack_consumer.py

```shell

```

### 4. 消息和队列持久化

-   消息和对列是存在内存中的，需要进行持久化操作
-   durable_producer.py

```python

```

-   

```python

```

## RPC

-   将一个函数运行在远程计算机上并且等待获取那里的结果，这个称作远程过程调用RPC(Remote Procedure Call)。
-   RPC是一个计算机通信协议
-   一种远程调用函数的接口
-   多台服务器之间相互调用
-   socket编程就是RPC通信

