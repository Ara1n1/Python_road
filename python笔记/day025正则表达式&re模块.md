## 正则表达式

### 1. 基本概念

1. re模块本身只是用来操作正则表达式的和正则本身无关

2. **正则表达式**：是一种匹配字符串的规则

3. 为什么要有正则

   - 匹配字符串
   - 表单验证：11位，全数字，1开头，第二个数 3-9，绑定银行卡
   - 爬虫：从网页源码中获取链接，重要数据


### 2. 规则

#### 2.1 元字符

1. 是哪个一字符就匹配字符串中的哪一个字符

2. 字符组（3）

   - [ad] ，匹配a/d，**单字符匹配**
   - [0-9]， [a-z]， [A-Z] (范围是从小到大),遵循ASCII码
   - [a-zA-Z], [0-9x]

3. 转义字符（6）

   - [0-9] 等价于  **\d** (\转义符，转义d使得其匹配0-9之间的数)
   - \w：(word,数字，大小写字母，下划线) 
   -  \s(space, 空格，换行，制表符)  (\t(table) \n(next))

   - \D  \W  \S(对以上结果取反)

4. 特殊符号的含义（4）

   - **.** 除了换行符之外的任意内容
   - [\d] [0-9] \d 没有区别。 [\d\D] 匹配所有
   - [^abc]：**非字符组**，[abc] 取反
   - ^：表示一个字符的开始。 $：表示一个字符的结束 (^abc\$)

5. | 和（）eg. abc|edf。  abc|ab 

```python
# 若果规则有重叠，需要长的在前面
www\.(baidu|google)\.com
# () 表示分组，给一部分正则规定为一组，
```

#### 2.2 量词

```python
1[3-9]\d{9}     # 量词前面一个重复次数，9次
1[3-9]\d{9,}    # 量词前面一个重复次数，9次以上
1[3-9]\d{n,m}   # 量词前面一个重复次数，n-m次
?               # ? 匹配到0次或1次，没匹配上也算一次，匹配上算2次
								#（可有可无，只能有一个）
+							  # + 匹配1次或多次
*               # * 匹配0次或多次
```

```python
# 匹配任意小数，保留两位
\d+\.\d{2}
# 匹配任意整数或小数
\d+\.?\d*		 # 有bug
\d+(\.?\d+)? # 分组实现
```

#### 2.3 贪婪匹配/惰性匹配

```python
\d{7-12}   # 默认是贪婪匹配，尽量多匹配
# 回溯算法
<.+>

# 非贪婪匹配，惰性匹配，总是匹配符合条件范围内尽量小的字符串
\d{2, 3}?
\d+?3         # 尽量多取，遇到3结束
元字符 量词 ？x # 按照元字符规则在量词范围内匹配，一旦遇到x停止
.*?x          # 常用，先找x找到匹配结束

# 元字符
# 元字符量词
# 元字符量词？
# \d+?x      .*?x   常用于爬虫
```

```python
李[^和]+
```

```python
# 身份证号匹配(正则表达式，断言)
[1-9](\d{16}[\dx]|\d{14})
[1-9]\d{14}(\d{2}[\dx])
```







