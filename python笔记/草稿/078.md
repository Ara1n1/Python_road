1. 富文本编辑框
2. 伪静态地址**xx/x.html**（seo）
3. pycharm查找可以使用命名分组进行查找和替换

```python
"../../(.*?)"
{% static "$1"%}
```

4. 设计表结构
  
   - 类别表
     1. 列表的名称
   
   - 文章详情表
     - content(textfield)
   
   - 文章表
     1. title
     2. create_at
     5. profile
     4. category(外键类别表)
     5. content(外键关联文章详情表)

```python
# repository中的 models.py
class Category(models.Model):
  	name = models.CharField('分类名', max_length=16)
    
class ArticleDetail(models.Model):
		content = models.TextField()

class Article(models.Model):
  	title = models.CharField('文章标题', max_length=32)
    profile = models.CharField('文章简介', max_length=256)
    img = models.ImageField(upload_to='img/article/', verbose_name = '显示图片')
    create_at = models.DateTimeField(auto_now_add=True, verbose_name='创建时间')
    category = models.ForeignKey('Category', blank=True, null=True, verbose_name='文章类别')
    # OneToOneField：一对一，并且外键唯一，包含 unique 约束
    detail = models.OneToOneField('ArticleDetail', verbose_name='文章详情')
```

- 上传文件media配置

1. settings.py文件

```python
# 用户上传数据，项目根目录创建 media 文件夹，上传文件所在位置
MEDIA_URL = '/media/'
MEDIA_ROOT = os.path.join(BASEDIR, 'media')
```

2. urls.py配置

```python
# 项目根的 urls.py
from django.views.static import serve
from django.conf import settings
url(r'^media/(?P<path>.*)$', serve, {'document_root': settings.MEDIA_ROOT}, name='img')
```



- 副文本编辑框

1. 下载

```python
# ckeditor
pip install django-ckeditor
```

2. 注册ckeditor

```python
# 注册
INSTALLED_APPS = [
  	'ckeditor',
		'ckeditor_uploader',
]

CKEDITOR_UPLOAS_PATH = 'ckeditor/'
```

3. 在**model.py**中使用字段

```python
from ckeditor_uploader.fields import RichTextUploadingField

class ArticleDetail(models.Model):
		content = RichTextUploadingField(verbose_name='文章详情')
```

4. 配置url

```python
url(r'^ckeditor/', include('ckeditor_uploader.urls'))
```

5. 在模版中导入js

```django
<script src="{% static 'ckeditor/ckeditor/ckeditor.js' %}"></script>
<script src="{% static 'ckeditor/ckeditor-init.js' %}"></script>
```

6. 两个表单出错回滚

```python
if detail_form.is_valid():
		detail_form.instance.delete()
```

7. 上传文件副文本文件

- 配置url.py

  ```python
  from ckeditor_uploader import views
  urlpatterns = [
    	url(r'^media/(?P<path>.*)$', serve, {'document_root'}: settings.MEDIA_ROOT, name='img')
  		url(r'^ckeditor/', include('ckeditor_uploader.urls'))
  		url(r'^ckeditor/upload/', views.upload)
  ]
  ```





